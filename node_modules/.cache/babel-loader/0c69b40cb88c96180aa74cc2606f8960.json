{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useCircularDrag = void 0;\n\nvar react_1 = require(\"react\");\n\nvar _1 = require(\"./\");\n\nfunction useCircularDrag(ref) {\n  var _a = _1.useCircularInputContext(),\n      onChange = _a.onChange,\n      onChangeEnd = _a.onChangeEnd,\n      getValueFromPointerEvent = _a.getValueFromPointerEvent;\n\n  var _b = react_1.useState(false),\n      isDragging = _b[0],\n      setDragging = _b[1];\n\n  var handleStart = react_1.useCallback(function (e) {\n    if (!onChange) return;\n    stopEvent(e);\n    setDragging(true);\n    var nearestValue = getValueFromPointerEvent(e);\n    onChange(nearestValue);\n  }, [onChange, setDragging, getValueFromPointerEvent]);\n  var handleMove = react_1.useCallback(function (e) {\n    stopEvent(e);\n    var nearestValue = getValueFromPointerEvent(e);\n    onChange(nearestValue);\n  }, [onChange, getValueFromPointerEvent]);\n  var handleEnd = react_1.useCallback(function (e) {\n    stopEvent(e);\n    setDragging(false);\n    if (!onChangeEnd) return;\n    var nearestValue = getValueFromPointerEvent(e);\n    onChangeEnd(nearestValue);\n  }, [onChangeEnd, getValueFromPointerEvent]); // we can't just use React for this due to needing { passive: false } to prevent touch devices scrolling\n\n  react_1.useEffect(function () {\n    var node = ref.current;\n    if (!node) return;\n    addStartListeners(node, handleStart);\n    return function () {\n      if (!node) return;\n      removeStartListeners(node, handleStart);\n    };\n  }, [ref, handleStart]);\n  react_1.useEffect(function () {\n    if (!isDragging) return;\n    addListeners(handleMove, handleEnd);\n    return function () {\n      removeListeners(handleMove, handleEnd);\n    };\n  }, [isDragging, handleMove, handleEnd]);\n  return {\n    isDragging: isDragging\n  };\n}\n\nexports.useCircularDrag = useCircularDrag;\n\nfunction addStartListeners(element, onStart) {\n  element.addEventListener('mousedown', onStart, {\n    passive: false\n  });\n  element.addEventListener('touchstart', onStart, {\n    passive: false\n  });\n}\n\nfunction removeStartListeners(element, onStart) {\n  element.removeEventListener('mousedown', onStart);\n  element.removeEventListener('touchstart', onStart);\n}\n\nfunction addListeners(onMove, onEnd) {\n  document.addEventListener('mousemove', onMove, {\n    passive: false\n  });\n  document.addEventListener('touchmove', onMove, {\n    passive: false\n  });\n  document.addEventListener('mouseup', onEnd, {\n    passive: false\n  });\n  document.addEventListener('touchend', onEnd, {\n    passive: false\n  });\n}\n\nfunction removeListeners(onMove, onEnd) {\n  document.removeEventListener('mousemove', onMove);\n  document.removeEventListener('touchmove', onMove);\n  document.removeEventListener('mouseup', onEnd);\n  document.removeEventListener('touchend', onEnd);\n}\n\nvar stopEvent = function (e) {\n  e.stopPropagation();\n\n  if (e.cancelable) {\n    e.preventDefault();\n  }\n};","map":{"version":3,"mappings":"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","names":["useCircularDrag","ref","_1","onChange","onChangeEnd","getValueFromPointerEvent","react_1","isDragging","setDragging","handleStart","e","stopEvent","nearestValue","handleMove","handleEnd","node","current","addStartListeners","removeStartListeners","addListeners","removeListeners","exports","element","onStart","addEventListener","passive","removeEventListener","onMove","onEnd","document","stopPropagation","cancelable","preventDefault"],"sourceRoot":"","sources":["../src/useCircularDrag.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}