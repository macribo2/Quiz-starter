{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CircularInput = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar utils_1 = require(\"./utils\");\n\nvar CircularInputContext_1 = require(\"./CircularInputContext\");\n\nvar CircularTrack_1 = require(\"./CircularTrack\");\n\nvar CircularProgress_1 = require(\"./CircularProgress\");\n\nvar CircularThumb_1 = require(\"./CircularThumb\");\n\nfunction CircularInput(_a) {\n  var _b = _a.value,\n      value = _b === void 0 ? 0.25 : _b,\n      _c = _a.radius,\n      radius = _c === void 0 ? 100 : _c,\n      _d = _a.onChange,\n      onChange = _d === void 0 ? function () {} : _d,\n      _e = _a.onChangeEnd,\n      onChangeEnd = _e === void 0 ? function () {} : _e,\n      _f = _a.tabIndex,\n      tabIndex = _f === void 0 ? 0 : _f,\n      children = _a.children,\n      props = __rest(_a, [\"value\", \"radius\", \"onChange\", \"onChangeEnd\", \"tabIndex\", \"children\"]);\n\n  var containerRef = react_1.useRef(null);\n  var size = radius * 2;\n  var center = react_1.useMemo(function () {\n    return {\n      x: radius,\n      y: radius\n    };\n  }, [radius]); // Accessibility\n\n  var _g = react_1.useState(false),\n      isFocused = _g[0],\n      setFocused = _g[1];\n\n  var isReadonly = !onChange;\n  var handleFocus = react_1.useCallback(function () {\n    setFocused(true);\n  }, []);\n  var handleBlur = react_1.useCallback(function () {\n    setFocused(false);\n  }, []);\n  var handleKeyDown = react_1.useCallback(function (e) {\n    if (!isFocused) return;\n    var keyCode = e.keyCode; // arrow up, arrow right, page up, space\n\n    var isIncrement = keyCode === 38 || keyCode === 39 || keyCode === 33 || keyCode === 32; // arrow down, arrow left, page down\n\n    var isDecrement = keyCode === 40 || keyCode === 37 || keyCode === 34;\n\n    if (isIncrement) {\n      onChange(Math.min(1, value + 0.1));\n    }\n\n    if (isDecrement) {\n      onChange(Math.max(0, value - 0.1));\n    }\n\n    if (isIncrement || isDecrement) {\n      e.preventDefault();\n    }\n  }, [isFocused, onChange, value]);\n  var accessibilityProps = {\n    tabIndex: tabIndex,\n    role: 'slider',\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onKeyDown: handleKeyDown\n  }; // Geometry utilities\n\n  var getPointFromValue = react_1.useCallback(function (v) {\n    return utils_1.polarToCartesian({\n      center: center,\n      angle: utils_1.valueToAngle(v || value),\n      radius: radius\n    });\n  }, [value, center, radius]);\n  var getValueFromPointerEvent = react_1.useCallback(function (e) {\n    return utils_1.calculateNearestValueToPoint({\n      point: utils_1.absPos(e),\n      container: utils_1.getElementPosition(containerRef.current),\n      value: value,\n      center: center,\n      radius: radius\n    });\n  }, [value, center, radius]); // Context\n\n  var context = react_1.useMemo(function () {\n    return {\n      value: value,\n      radius: radius,\n      center: center,\n      isFocused: isFocused,\n      setFocused: setFocused,\n      onChange: onChange,\n      onChangeEnd: onChangeEnd,\n      getPointFromValue: getPointFromValue,\n      getValueFromPointerEvent: getValueFromPointerEvent\n    };\n  }, [value, radius, center, onChange, onChangeEnd, isFocused, setFocused, getPointFromValue, getValueFromPointerEvent]);\n  var handleClick = react_1.useCallback(function (e) {\n    if (isReadonly) return;\n    var nearestValue = getValueFromPointerEvent(e);\n    onChange(nearestValue);\n    onChangeEnd(nearestValue);\n  }, [onChange, onChangeEnd, getValueFromPointerEvent, isReadonly]);\n\n  var style = __assign(__assign({\n    overflow: 'visible',\n    outline: 'none'\n  }, props.style || {}), {\n    touchAction: 'manipulation',\n    WebkitTapHighlightColor: 'rgba(0,0,0,0)'\n  });\n\n  return react_1.default.createElement(CircularInputContext_1.CircularInputProvider, {\n    value: context\n  }, react_1.default.createElement(\"svg\", __assign({}, props, {\n    ref: containerRef,\n    width: size,\n    height: size,\n    viewBox: \"0 0 \" + size + \" \" + size,\n    style: style,\n    onClick: handleClick\n  }, !isReadonly ? accessibilityProps : {}), children ? typeof children === 'function' ? children(context) : children : react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(CircularTrack_1.CircularTrack, null), react_1.default.createElement(CircularProgress_1.CircularProgress, null), react_1.default.createElement(CircularThumb_1.CircularThumb, null))));\n}\n\nexports.CircularInput = CircularInput;","map":{"version":3,"mappings":"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","names":["CircularInput","_a","_b","_c","radius","_d","onChange","_e","onChangeEnd","_f","tabIndex","children","props","containerRef","react_1","size","center","x","y","isFocused","setFocused","isReadonly","handleFocus","handleBlur","handleKeyDown","e","isIncrement","keyCode","isDecrement","Math","min","value","max","preventDefault","accessibilityProps","role","onFocus","onBlur","onKeyDown","getPointFromValue","v","angle","utils_1","getValueFromPointerEvent","point","container","current","context","handleClick","nearestValue","style","overflow","outline","touchAction","WebkitTapHighlightColor","CircularInputContext_1","ref","width","height","viewBox","onClick","CircularTrack_1","CircularProgress_1","CircularThumb_1","exports"],"sourceRoot":"","sources":["../src/CircularInput.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}